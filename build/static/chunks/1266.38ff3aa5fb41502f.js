(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1266],{31705:function(e,t,n){"use strict";n.r(t);var l=n(9268),i=n(86006),o=n(11598),d=n.n(o),r=n(16648),c=n(8038),a=n(66628),u=n(37610),s=n(23747),v=n(69354),m=n(56008),p=n(46285),_=n(99466);t.default=e=>{var t,n;let o,{page:g}=e,{checkAuthentication:h}=(0,_.J)(),f=(0,m.useRouter)(),L=(0,a.I0)(),y=(0,a.v9)(e=>e.homePagedata),x=(0,a.v9)(e=>e.homePagedata.loginPopupState),[E,w]=i.useState(!1),[P,j]=i.useState(null);o=(0,v.$o)("cityId");let I=parseFloat(o),{refetch:V}=(0,s.a)("recently-view",c.z.recentlyViewedProduct,"?cityId=".concat(I,"&userId=").concat(P?(0,p.pe)((0,v.$o)("_ga")):(0,p.qW)((0,v.$o)("tempUserID")))),k=async()=>{let e=await h();j(e)};(0,i.useEffect)(()=>{k(),V().then(e=>{var t;L((0,u.vQ)(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data))}).catch(e=>console.log(e))},[P]);let N=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e,t;let n=N.current;if(!n)return;let l=!1,i=i=>{l=!0,e=i.pageX-n.offsetLeft,t=n.scrollLeft},o=()=>{w(!1),l=!1},d=()=>{l&&!E&&w(!0)};return n.addEventListener("mousemove",i=>{if(i.preventDefault(),!l)return;let o=i.pageX-n.offsetLeft,d=o-e;n.scrollLeft=t-d}),n.addEventListener("mousedown",i,!1),n.addEventListener("mouseup",o,!1),n.addEventListener("mouseleave",o,!1),n.addEventListener("mousemove",d),()=>{n.removeEventListener("mousedown",i),n.removeEventListener("mouseup",o),n.removeEventListener("mouseleave",o),n.removeEventListener("mousemove",d)}},[]);let C=(e,t)=>{e.target.classList.contains(d().child)||f.push("/things/".concat(t.product_id,"/").concat(t.seourl))};return(0,l.jsx)(l.Fragment,{children:(null==y?void 0:y.recentProduct)?(0,l.jsxs)("div",{className:d().main_container,children:[(null==y?void 0:null===(t=y.recentProduct)||void 0===t?void 0:t.length)?(0,l.jsx)("h2",{className:"".concat("product"===g&&"xl:!text-24 xl:!tracking-0.48"," ").concat(d().heading),children:"Recently Viewed products"}):null,(0,l.jsx)("div",{className:"".concat(d().recentlyViewed_main),ref:N,children:null==y?void 0:null===(n=y.recentProduct)||void 0===n?void 0:n.map((e,t)=>{var n,i,o,c,a,u;return(0,l.jsx)(l.Fragment,{children:((null==e?void 0:e.image)||(null==e?void 0:e.price))&&(0,l.jsx)("div",{onClick:t=>{x||C(t,e)},className:"".concat(null!==(u=d().child)&&void 0!==u?u:"","  ").concat(t===(null==y?void 0:null===(n=y.recentProduct)||void 0===n?void 0:n.length)-1&&"mr-[16px]"," ").concat(E&&"pointer-events-none"),children:(0,l.jsx)(r.Z,{cardImage:v.d9+(null==e?void 0:null===(i=e.image)||void 0===i?void 0:i.split(",")[0]),hoverCardImage:(null==e?void 0:null===(o=e.image)||void 0===o?void 0:o.split(",").filter(e=>e).length)>1?v.d9+(null==e?void 0:null===(c=e.image)||void 0===c?void 0:c.split(",")[1]):v.d9+(null==e?void 0:null===(a=e.image)||void 0===a?void 0:a.split(",")[0]),discount:"".concat(Math.round(((null==e?void 0:e.price)-(null==e?void 0:e.product_sale_price))*100/(null==e?void 0:e.product_sale_price)).toFixed(0),"%"),originalPrice:null==e?void 0:e.price,currentPrice:null==e?void 0:e.product_sale_price,desc:null==e?void 0:e.product_name,productID:null==e?void 0:e.product_id,seourl:null==e?void 0:e.seourl})},t.toString())})})})]}):null})}},11598:function(e){e.exports={main_container:"style_main_container__jV4G5",heading:"style_heading__5ypuH",recentlyViewed_main:"style_recentlyViewed_main__UyLVD"}}}]);