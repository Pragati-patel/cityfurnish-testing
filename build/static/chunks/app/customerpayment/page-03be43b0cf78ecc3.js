(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8055],{13902:function(e,t,a){"use strict";var n=a(86006),s=a(46750),o=a(40431),r=a(70184),l=a(90300),i=a(10854),_=a(86979),c=a.n(_),d=n.createContext(),u={initialChunks:{}},m="PENDING",f="REJECTED",p=function(e){var t=function(t){return n.createElement(d.Consumer,null,function(a){return n.createElement(e,Object.assign({__chunkExtractor:a},t))})};return e.displayName&&(t.displayName=e.displayName+"WithChunkExtractor"),t},h=function(e){return e};function v(e){var t=e.defaultResolveComponent,a=void 0===t?h:t,_=e.render,d=e.onLoad;function v(e,t){void 0===t&&(t={});var h="function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e,v={};function y(e){return t.cacheKey?t.cacheKey(e):h.resolve?h.resolve(e):"static"}function x(e,n,s){var o=t.resolveComponent?t.resolveComponent(e,n):a(e);if(t.resolveComponent&&!(0,i.isValidElementType)(o))throw Error("resolveComponent returned something that is not a React component!");return c()(s,o,{preload:!0}),o}var g=function(e){var t=y(e),a=v[t];return a&&a.status!==f||((a=h.requireAsync(e)).status=m,v[t]=a,a.then(function(){a.status="RESOLVED"},function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:h.resolve(e),chunkName:h.chunkName(e),error:t?t.message:t}),a.status=f})),a},b=p(function(e){function a(a){var n;return((n=e.call(this,a)||this).state={result:null,error:null,loading:!0,cacheKey:y(a)},!function(e,t){if(!e){var a=Error("loadable: "+t);throw a.framesToPop=1,a.name="Invariant Violation",a}}(!a.__chunkExtractor||h.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),a.__chunkExtractor)?(!1===t.ssr||(h.requireAsync(a).catch(function(){return null}),n.loadSync(),a.__chunkExtractor.addChunk(h.chunkName(a))),(0,r.Z)(n)):(!1!==t.ssr&&(h.isReady&&h.isReady(a)||h.chunkName&&u.initialChunks[h.chunkName(a)])&&n.loadSync(),n)}(0,l.Z)(a,e),a.getDerivedStateFromProps=function(e,t){var a=y(e);return(0,o.Z)({},t,{cacheKey:a,loading:t.loading||t.cacheKey!==a})};var n=a.prototype;return n.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===f&&this.setCache(),this.state.loading&&this.loadAsync()},n.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},n.componentWillUnmount=function(){this.mounted=!1},n.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},n.getCacheKey=function(){return y(this.props)},n.getCache=function(){return v[this.getCacheKey()]},n.setCache=function(e){void 0===e&&(e=void 0),v[this.getCacheKey()]=e},n.triggerOnLoad=function(){var e=this;d&&setTimeout(function(){d(e.state.result,e.props)})},n.loadSync=function(){if(this.state.loading)try{var e=h.requireSync(this.props),t=x(e,this.props,N);this.state.result=t,this.state.loading=!1}catch(e){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:h.resolve(this.props),chunkName:h.chunkName(this.props),error:e?e.message:e}),this.state.error=e}},n.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then(function(t){var a=x(t,e.props,N);e.safeSetState({result:a,loading:!1},function(){return e.triggerOnLoad()})}).catch(function(t){return e.safeSetState({error:t,loading:!1})}),t},n.resolveAsync=function(){var e=this.props;return g((e.__chunkExtractor,e.forwardedRef,(0,s.Z)(e,["__chunkExtractor","forwardedRef"])))},n.render=function(){var e=this.props,a=e.forwardedRef,n=e.fallback,r=(e.__chunkExtractor,(0,s.Z)(e,["forwardedRef","fallback","__chunkExtractor"])),l=this.state,i=l.error,c=l.loading,d=l.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===m)throw this.loadAsync();if(i)throw i;var u=n||t.fallback||null;return c?u:_({fallback:u,result:d,options:t,props:(0,o.Z)({},r,{ref:a})})},a}(n.Component)),N=n.forwardRef(function(e,t){return n.createElement(b,Object.assign({forwardedRef:t},e))});return N.displayName="Loadable",N.preload=function(e){N.load(e)},N.load=function(e){return g(e)},N}return{loadable:v,lazy:function(e,t){return v(e,(0,o.Z)({},t,{suspense:!0}))}}}var y=v({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,a=e.props;return n.createElement(t,a)}}),x=y.loadable,g=y.lazy,b=v({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,a=e.props;return a.children?a.children(t):null}}),N=b.loadable,j=b.lazy;x.lib=N,g.lib=j,t.ZP=x},453:function(e,t,a){Promise.resolve().then(a.bind(a,23089))},23089:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var n=a(9268),s=a(86006),o=a(36945),r=a(64114),l=a(36419),i=a(30353),_=a(68852),c=a(41945),d=a.n(c),u=a(93969),m=a.n(u),f=a(21530),p=a(46285),h=a(69354),v=a(24214),y=a(90490),x=a(8038),g=a(37227),b=a(66628),N=a(62423),j=a(56008),w=a(37610),k=a(35397),C=a(99466),E=function(){var e;let{checkAuthentication:t}=(0,C.J)(),a=(0,j.useRouter)(),o=(0,b.I0)(),r=(0,p.pe)((0,h.$o)("_ga")),c=(0,b.v9)(e=>e.invoicePage),u=(0,b.v9)(e=>e.homePagedata.isLogin),E=window.location.href,S=new URLSearchParams(E.split("?")[1]),R=S.get("email"),Z=S.get("name"),P=S.get("amount"),z=parseInt(null==P?void 0:null===(e=P.split(".")[1])||void 0===e?void 0:e.split(",").join(""),10),A=S.get("invoice_number"),[I,q]=(0,s.useState)(c.isCoinApplied),[D,K]=(0,s.useState)(0),[V,F]=(0,s.useState)({fullName:Z||"",email:R||"",amount:z||0,invoice:A||"",cfCoins:D,notes:""}),[O,L]=(0,s.useState)(!1),[T,U]=(0,s.useState)(0),[H,B]=(0,s.useState)(null),[J,X]=(0,s.useState)(!0),[W,M]=(0,s.useState)(),[Y,G]=(0,s.useState)(!1),[Q,$]=(0,s.useState)(!1);(0,s.useEffect)(()=>{M(u)},[u]);let ee=e=>{o((0,w.V)(e)),G(e)},et=async()=>{let e=await t();!0===e?M(!0):M(!1)};(0,s.useEffect)(()=>{et()},[W]);let ea=()=>{v.Z.get(y.v2+x.z.addToCart.fetchCoins(H)).then(e=>{var t,a,n,s,o,r,l,i;(null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.length)>0&&K(parseInt(null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:null===(n=s[0])||void 0===n?void 0:n.topup_amount)),U(parseInt(null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(l=i.data)||void 0===l?void 0:null===(r=l[0])||void 0===r?void 0:r.topup_amount))}).catch(e=>console.log(e))},en=i.Ry({fullName:i.Z_().required("Full name is required").min(2,"Name should be of atleast 2 characters long"),email:i.Z_().email().required("Please enter a valid email address."),amount:i.Rx().required("Amount is required.")}),es=async()=>{let e=await (0,h.ve)("https://checkout.razorpay.com/v1/checkout.js");if(console.log(e),!e){alert("Razorpay SDK failed to load. Are you online?");return}let t=await v.Z.post(y.v2+x.z.customerPayment.createCustomerPayment,{full_name:V.fullName,email:V.email,price:V.amount,user_invoice_number:V.invoice,cfCoins:V.cfCoins,notes:V.notes||""});if(console.log(t.data,"make payment api data"),!t){alert("Server error. Are you online?");return}let n=t.data.data;console.log(n);let s=t.data.data.data,r={key:g.sV,amount:V.amount,name:"Cityfurnish",description:"Test Transaction",image:"https://rentofurniture.com/images/logo/FaviconNew.png",order_id:n.raz_order_id,customer_id:n.customer_id,handler:async function(e){console.log(e,"responsse in handler");let t={transactionID:e.razorpay_payment_id,auth_raz_order_id:e.razorpay_order_id,fullName:null==s?void 0:s.full_name,paymentSource:"",signature:e.razorpay_signature,email:null==s?void 0:s.email,invoiceNumber:null==V?void 0:V.invoice,cfCoins:V.cfCoins,notes:V.notes||"",recId:s.recID,amount:V.amount},n=await v.Z.post(y.v2+x.z.customerPayment.savePayment,t);console.log(n),o((0,w.h0)(e.razorpay_order_id)),o((0,w.eo)(e.razorpay_payment_id)),o((0,w.I6)(V.amount)),a.push("/success/payment")},prefill:{name:null==s?void 0:s.full_name,email:null==s?void 0:s.email,contact:null==s?void 0:s.phone_no},theme:{color:g.Pz}};console.log(r,"optionss");let l=new window.Razorpay(r);l.open(),l.on("payment.failed",e=>{console.log(e)})},eo=e=>{console.log(e,"values"),F({...V,fullName:e.fullName,email:e.email,amount:e.amount,invoice:e.invoice,cfCoins:D}),""===e.amount&&L(!0),console.log(V,"formdata"),es()},er=e=>{""!==e?(q(!0),D<parseInt(e)?(z=D-parseInt(e),F({...V,amount:-1*z}),K(0)):(K(D-parseInt(e)),F({...V,cfCoins:parseInt(e)}),F({...V,amount:0}))):L(!0)};return(0,s.useEffect)(()=>{B(r)},[r]),(0,s.useEffect)(()=>{ea()},[H]),(0,s.useEffect)(()=>{setTimeout(()=>{X(!1)},1e3)},[Z,R,z,A,D]),(0,n.jsxs)("div",{className:m().wrapper,children:[(0,n.jsx)(k.Z,{closeModal:()=>ee(!1),isModalOpen:Y,setIsLogin:e=>M(e),handleChangeRoute:()=>{Q&&a.push("/invoices")}}),(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Z,{currentPage:"Customer Payment"}),(0,n.jsx)("div",{className:m().main_heading,children:" Pay Your Dues"}),J?(0,n.jsx)("div",{className:"w-2/3",children:(0,n.jsx)(N.Z,{})}):(0,n.jsx)("div",{children:(0,n.jsx)(_.J9,{initialValues:V,validationSchema:en,onSubmit:e=>eo(e),children:e=>(0,n.jsx)(_.l0,{className:m().form_wrapper,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:d().form_field,children:[(0,n.jsx)("p",{className:d().form_label,children:"Full name"}),(0,n.jsx)(_.gN,{type:"text",name:"fullName",placeholder:"Enter your name",className:d().form_input,onChange:t=>{e.setFieldValue("fullName",t.target.value),F({...V,fullName:t.target.value})}}),(0,n.jsx)(_.Bc,{name:"fullName",children:t=>e.touched.fullName&&(0,n.jsxs)("p",{className:d().error,children:[t," "]})})]}),(0,n.jsxs)("div",{className:d().form_field,children:[(0,n.jsx)("p",{className:d().form_label,children:"Email"}),(0,n.jsx)(_.gN,{type:"email",name:"email",placeholder:"Enter your email",className:d().form_input,onChange:t=>{e.setFieldValue("email",t.target.value),F({...V,email:t.target.value})}}),(0,n.jsx)(_.Bc,{name:"email",children:t=>e.touched.email&&(0,n.jsxs)("p",{className:d().error,children:[t," "]})})]}),(0,n.jsxs)("div",{className:m().form_field,children:[(0,n.jsx)("p",{className:m().form_label,children:"Invoice Number (Optional)"}),(0,n.jsx)("input",{type:"text",name:"invoice",placeholder:"Please provide the invoice number for payment.",className:m().form_input,value:e.values.invoice,onChange:t=>{e.setFieldValue("invoice",t.target.value),F({...V,invoice:t.target.value})}}),(0,n.jsxs)("div",{className:m().all_invoices,onClick:()=>{W?a.push("/invoices"):(ee(!0),$(!0))},children:[(0,n.jsx)("p",{className:m().all_invoice_text,children:"See my all invoices"}),(0,n.jsx)(f.Og,{color:"#5774AC",size:25,className:"cursor-pointer"})]})]}),(0,n.jsxs)("div",{className:m().form_field,children:[(0,n.jsxs)("p",{className:m().form_label,children:["Enter amount (in ",(0,n.jsx)("span",{className:"font-Inter",children:"₹"}),")"]}),(0,n.jsx)(_.gN,{type:"number",onKeyPress:h.CH,name:"amount",placeholder:"Enter the amount to be paid",className:m().form_input,onChange:t=>{F({...V,amount:t.target.value}),e.setFieldValue("amount",t.target.value),L(!1),e.touched.amount=!1},value:I?V.amount:e.values.amount}),(0,n.jsx)(_.Bc,{name:"amount",children:t=>e.touched.amount&&(0,n.jsxs)("p",{className:d().error,children:[t," "]})}),O&&(0,n.jsx)("p",{className:d().error,children:"Please enter a valid number."}),W?(0,n.jsxs)("div",{className:m().toggleRow,children:[I?(0,n.jsx)("div",{children:(0,n.jsx)(f.$K,{size:30,color:"#5774AC",onClick:()=>{q(!1),K(T)},className:"cursor-pointer"})}):(0,n.jsx)("div",{children:(0,n.jsx)(f.HN,{color:"#E3E1DC",size:30,onClick:()=>er(e.values.amount),className:"cursor-pointer"})}),(0,n.jsxs)("p",{className:m().toggle_text,children:["Use Cityfurnish coins (Available balance :"," ",D,")"]})]}):(0,n.jsxs)("div",{className:m().login_row,children:[(0,n.jsxs)("a",{onClick:()=>{ee(!0)},className:"text-5774AC cursor-pointer",children:["Login"," "]}),(0,n.jsx)("span",{className:"text-71717A",children:"to use Cityfurnish coins"})]})]}),(0,n.jsxs)("div",{className:m().form_field,children:[(0,n.jsx)("p",{className:m().form_label,children:"Notes (Optional)"}),(0,n.jsx)("input",{type:"text",name:"notes",placeholder:"Enter if you have any notes",className:m().form_input,onChange:t=>{e.setFieldValue("notes",t.target.value),F({...V,notes:t.target.value})}})]}),(0,n.jsxs)("button",{className:m().pay_now_btn,type:"submit",children:["Pay now",(0,n.jsx)(f.tm,{size:20,color:"#222222"})]})]})})})})]})]})},S=a(3939),R=a(13902),Z=a(18160);let P=(0,R.ZP)(()=>Promise.resolve().then(a.bind(a,3939)),{fallback:(0,n.jsx)(S.FooterSkeleton,{})});var z=function(){return(0,n.jsxs)("div",{className:"large_layout",children:[(0,n.jsx)(Z.Z,{}),(0,n.jsx)(o.Z,{}),(0,n.jsx)(r.Z,{}),(0,n.jsx)(E,{}),(0,n.jsx)(P,{})]})}},36419:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(9268),s=a(21530);a(86006);var o=a(28761),r=a.n(o);function l(e){let{currentPage:t}=e;return(0,n.jsxs)("div",{className:r().bread_crumbs,children:[(0,n.jsx)("a",{href:"/",children:(0,n.jsx)("p",{className:r().bread_crumbs_text,children:"Home"})}),(0,n.jsx)(s.Xs,{color:"#71717A",size:12}),(0,n.jsx)("p",{className:"".concat(r().bread_crumbs_text," !font-medium font-Poppins"),children:t})]})}},62423:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(9268);a(86006);var s=a(50075),o=a.n(s),r=a(9238);function l(){return(0,n.jsxs)("div",{className:o().skeleton_wrapper,children:[(0,n.jsx)("div",{className:"mt-8",children:[1,2,3,4].map(e=>(0,n.jsxs)("div",{className:o().skeleton_form_field,children:[(0,n.jsx)("div",{className:o().field_heading,children:(0,n.jsx)(r.Z,{variant:"text",className:o().skeleton_full,height:12})}),(0,n.jsx)("div",{className:o().field_input,children:(0,n.jsx)(r.Z,{variant:"text",className:o().skeleton_full,height:56})})]},e.toString()))}),(0,n.jsx)("div",{className:o().skeleton_submit_btn,children:(0,n.jsx)(r.Z,{variant:"rectangular",className:o().skeleton_full})})]})}},41945:function(e){e.exports={main_container:"styles_main_container__2FrlJ",left_div:"styles_left_div__6afTZ",head_div:"styles_head_div__AqDmx",head:"styles_head__ep7jZ",saved_address_div:"styles_saved_address_div__QWf_X",change_btn:"styles_change_btn__0_2d_",saved_add_head:"styles_saved_add_head__EfyGh",saved_add_upper_div:"styles_saved_add_upper_div__lORoB",name_div:"styles_name_div__zf4__",saved_name:"styles_saved_name__v1jcP",saved_address:"styles_saved_address__RxWAg",new_address_wrapper:"styles_new_address_wrapper__xBby9",new_add_head:"styles_new_add_head__czLdJ",add_new_info:"styles_add_new_info__FDQKX",add_new_info_text:"styles_add_new_info_text__rnXlQ",form_field:"styles_form_field__6yJws",form_label:"styles_form_label__x9UBb",form_input:"styles_form_input__ZtR1g",form_input_textarea:"styles_form_input_textarea__ER_8I",contact_input:"styles_contact_input__IIr80",flag:"styles_flag__GhUWN",textarea:"styles_textarea__tdZUs",error:"styles_error__JwrEo",save_btn:"styles_save_btn__WiVgy",right_div:"styles_right_div__Luago",box_wrapper:"styles_box_wrapper__FaSHd",whatsapp_icon:"styles_whatsapp_icon__YDc12",box_wrapper_left_div:"styles_box_wrapper_left_div__BXfE6",box_desc:"styles_box_desc__2oONd",hash:"styles_hash__wbHkI",tenure_info:"styles_tenure_info__b1MDu",kyc_info:"styles_kyc_info__I74yn",desc:"styles_desc__8qhnV",calendar:"styles_calendar__Y_q2P",verified_icon:"styles_verified_icon__Xi3uW",not_belong_wrapper:"styles_not_belong_wrapper__k4S4m",not_belong_text:"styles_not_belong_text__XVl2_",order_type_field:"styles_order_type_field__GrZjM",ordertype_option:"styles_ordertype_option__0CQqz"}},28761:function(e){e.exports={bread_crumbs:"style_bread_crumbs__JAtCH",bread_crumbs_text:"style_bread_crumbs_text__LnswY"}},50075:function(e){e.exports={skeleton_wrapper:"style_skeleton_wrapper__1kZAx",skeleton_full:"style_skeleton_full__hV3F_",skeleton_form_field:"style_skeleton_form_field__cYEC3",field_heading:"style_field_heading__jfHy4",field_input:"style_field_input__DRUsz",skeleton_submit_btn:"style_skeleton_submit_btn__fOHUK"}},93969:function(e){e.exports={wrapper:"style_wrapper__ZJ90U",main_heading:"style_main_heading__p6FQ7",form_field:"style_form_field__O_caT",form_label:"style_form_label__lnzpS",form_input:"style_form_input__lU8jT",flag:"style_flag__TrpGR",pay_now_btn:"style_pay_now_btn__ixXcl",toggleRow:"style_toggleRow__tbluP",toggle_text:"style_toggle_text__SHdlK",all_invoices:"style_all_invoices__qoYPV",all_invoice_text:"style_all_invoice_text__xBiBk",login_row:"style_login_row__r_SXH"}},70184:function(e,t,a){"use strict";function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}a.d(t,{Z:function(){return n}})}},function(e){e.O(0,[3791,3287,2775,5625,5639,6680,4947,3296,8121,372,9173,1524,8166,5852,6738,6877,6130,7557,261,8372,2329,5400,1053,3939,9253,2961,1744],function(){return e(e.s=453)}),_N_E=e.O()}]);